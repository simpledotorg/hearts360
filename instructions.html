<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>HEARTS 360 Dashboard: Instructions</title>
    <meta
      name="description"
      content="A free, open source, template for creating a very useful hypertension and diabetes dashboard to support public health projects."
    />
    <meta name="author" content="Resolve to Save Lives" />

    <link rel="icon" href="favicon.png" />

    <link rel="stylesheet" href="css/preflight.css?v=1.0" />
    <link rel="stylesheet" href="css/template.css" />
  </head>
  <body>
    <div class="banner">
      <div class="banner-body">
        <h1><span>HEARTS</span>360</h1>

        <div class="desktop-only">
          <div class="link-list">
            <span>v1.3</span>
            <a href="instructions.html">Setup instructions</a>
            <a
              class="external-link"
              href="https://github.com/simpledotorg/hypertension-dashboard"
              >GitHub</a
            >
          </div>
        </div>
      </div>
    </div>
    <div class="link-dashboards">
      <div>
        <a href="index.html"> &larr; Return to dashboard </a>
      </div>
    </div>

    <main>
      <h1>Developer guide</h1>

      <div class="notes">
        <aside class="notes-nav">
          <h2>Implementation guide</h2>
          <p>
            Many of the data definitions are based on the
            <a
              href="https://apps.who.int/iris/bitstream/handle/10665/260423/WHO-NMH-NVI-18.5-eng.pdf"
              >WHO HEARTS</a
            >
            technical package.
          </p>

          <span class="nav-section">Overview indicators</span>
          <a href="#note-patients-protected" class="nav-jump-links"
            >Patients protected</a
          >
          <a href="#note-treatment-cascade" class="nav-jump-links"
            >Hypertension treatment cascade</a
          >

          <span class="nav-section">Hypertension treatment outcomes</span>
          <a href="#note-bp-controlled" class="nav-jump-links"
            >BP controlled at latest visit</a
          >
          <a href="#note-bp-uncontrolled" class="nav-jump-links"
            >BP not controlled at latest visit</a
          >
          <a href="#note-bp-3-month-ltfu" class="nav-jump-links"
            >No visit in past 3 months</a
          >

          <span class="nav-section">Registrations</span>
          <a href="#note-bp-under-care" class="nav-jump-links"
            >Patients under care</a
          >
          <a href="#note-bp-registrations" class="nav-jump-links"
            >Cumulative registrations</a
          >
          <a href="#note-bp-monthly" class="nav-jump-links"
            >Monthly registrations</a
          >

          <span class="nav-section">LTFU</span>
          <a href="#note-bp-12-month-ltfu" class="nav-jump-links"
            >12 month lost to follow-up</a
          >

          <span class="nav-section">Opportunistic screening</span>
          <a href="#note-bp-screened" class="nav-jump-links"
            >% of OPD patients screened</a
          >
          <a href="#note-bp-screened-monthly" class="nav-jump-links"
            >Monthly OPD patients screened</a
          >

          <span class="nav-section">Cohorts</span>
          <a href="#note-bp-cohorts" class="nav-jump-links">Cohort reports</a>

          <span class="nav-section">Stock</span>
          <a href="#note-bp-drug-stock" class="nav-jump-links"
            >Anti-hypertensive drug stock</a
          >
          <a href="#note-bp-monitors" class="nav-jump-links"
            >Blood pressure monitors</a
          >
        </aside>
        <div class="notes-body">
          <div class="notes-section">
            <div class="notes-note">
              <h5>Patient Categorization</h5>
              <p>
                Patients in the hypertension program are categorized as one of
                the following:
              </p>
              <ul>
                <li>Under care</li>
                <li>12 month lost to follow up</li>
                <li>Dead</li>
              </ul>

              <p>
                Patients marked 'under care' fall into one of the 4 following
                additional categories:
              </p>
              <ul>
                <li>
                  Newly registered - this category is not visualized in the
                  dashboard
                </li>
                <li>BP controlled</li>
                <li>BP uncontrolled</li>
                <li>No visit</li>
              </ul>

              <p>
                Depending on the month, a patient may fall under different
                categories. See eamples.
              </p>

              <p>
                As a result, the notion of a REFERENCE MONTH is important for
                crafting the queries required to get accurate information for
                each month to build the hypertension treatment indicators.
              </p>
              <p>
                All elements related to time, should be computed from the
                perspective of the REFERENCE MONTH and not the current date.
                This is critically important for information such as:
              </p>
              <ul>
                <li>Number of BP encounters in the last 3 months</li>
                <li>Number of BP encounters in the last 12 months</li>
                <li>Most recent BP value in the last 3 months</li>
              </ul>
              <p>
                We consider it a good practice to chart the last 18 months of
                data with the most recent month being the current month.
              </p>
              <p
                style="
                  background: rgb(255, 244, 172);
                  border-width: 4px;
                  border-color: rgb(236, 223, 77);
                  padding: 8px 12px;
                "
              >
                All indicators listed in this document are computed as monthly
                values. For completed months, the monthly value is based on the
                end of the month. For the current month, the monthly value is
                updated throughout the course of the month (e.g. daily if
                materialized views are refreshed daily).
              </p>
            </div>
            <div class="notes-details">
              <blockquote>
                <h6>Example A</h6>
                <p>
                  A patient registered in January 2024, is considered Newly
                  Registered for the first 3 months from registration date and
                  from April 2024 moves into either the BP controlled, BP
                  uncontrolled or No Visit category
                </p>
                <h6>Example B</h6>

                <p>
                  Patients under care that have a visit recorded in the last 3
                  months will be in the BP Controlled or BP Uncontrolled
                  category (depending on their BP reading)
                </p>

                <h6>Example C</h6>
                <p>
                  A patient that does not have a visit recorded in the last 12
                  months will move to the 12 month lost to follow-up category
                  (up until the 12 month mark, the patient will be recorded in
                  the No Visit category)
                </p>
              </blockquote>
            </div>
          </div>
          <div class="notes-section">
            <div class="notes-note" style="width: 100%">
              <table>
                <thead>
                  <tr>
                    <th colspan="5" style="text-align: center">
                      Patient Category
                    </th>
                    <th style="text-align: center">Condition</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td
                      class="all-known-patients"
                      rowspan="7"
                      style="text-align: center"
                    >
                      All Known Patients
                    </td>
                  </tr>
                  <tr>
                    <td class="dead" colspan="4" style="text-align: center">
                      Dead
                    </td>
                    <td>Patient is dead</td>
                  </tr>
                  <tr>
                    <td class="alive" rowspan="5" style="text-align: center">
                      Alive
                    </td>
                    <td colspan="3" style="text-align: center">
                      Lost to follow-up
                    </td>
                    <td>Patient has no visit in the past 12 months</td>
                  </tr>
                  <tr>
                    <td class="alive" rowspan="4" style="text-align: center">
                      Under care
                    </td>
                    <td colspan="2" style="text-align: center">
                      Newly registered
                    </td>
                    <td>Patient has been registered in the past 3 months</td>
                  </tr>
                  <tr>
                    <td rowspan="3" style="text-align: center">
                      Under Care Registered before the past 3 months
                    </td>
                    <td style="text-align: center">No visit</td>
                    <td>
                      Patient has no visit in the past 3 months<br />
                      This excludes Newly Registered patients
                    </td>
                  </tr>
                  <tr>
                    <td style="text-align: center">Uncontrolled BP</td>
                    <td>
                      Latest BP taken in the past 3 months was not controlled<br />
                      This exudes Newly Registered patients and No Visit
                    </td>
                  </tr>
                  <tr>
                    <td style="text-align: center">Controlled BP</td>
                    <td>
                      Latest BP taken in the past 3 months was controlled<br />
                      This exudes Newly Registered patients and No Visit
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
          <div class="notes-section">
            <div class="notes-note" id="note-patients-protected">
              <h5>Database structure example</h5>
              <p>
                This example corresponds to the minimal data set required to
                reproduce the HEART360 dashboard. It does not correspond to a
                real life example, as tables are missing important information
                (name/phone number, table ids …)
              </p>
              <p>Data can be organized differently.</p>
            </div>
          </div>
          <div class="notes-section">
            <div class="notes-note" id="note-treatment-cascade">
              <h6>Patients table</h6>
              <p>Example table structure for patients.</p>
            </div>
            <div class="notes-details">
              <table border="1">
                <thead>
                  <tr>
                    <th>Column name</th>
                    <th>Column type</th>
                    <th>Possible Values</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>patient_id</td>
                    <td>number</td>
                    <td></td>
                  </tr>
                  <tr>
                    <td>patient_status</td>
                    <td></td>
                    <td>DEAD, ALIVE</td>
                  </tr>
                  <tr>
                    <td>registration_date</td>
                    <td>date</td>
                    <td></td>
                  </tr>
                  <tr>
                    <td>death_date</td>
                    <td>date</td>
                    <td></td>
                  </tr>
                  <tr>
                    <td>facility</td>
                    <td></td>
                    <td></td>
                  </tr>
                  <tr>
                    <td>region</td>
                    <td></td>
                    <td></td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>

          <div class="notes-section">
            <div class="notes-note">
              <h6>BP encounters table</h6>
              <p>Example table structure for BP encounters.</p>
            </div>
            <div class="notes-details">
              <table border="1">
                <thead>
                  <tr>
                    <th>Column name</th>
                    <th>Column type</th>
                    <th>Possible Values</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>encounter_id</td>
                    <td>number</td>
                    <td></td>
                  </tr>
                  <tr>
                    <td>patient_id</td>
                    <td>number</td>
                    <td>References a patient.<br />Can be a Foreign Key</td>
                  </tr>
                  <tr>
                    <td>encounter_date</td>
                    <td>date</td>
                    <td></td>
                  </tr>
                  <tr>
                    <td>diastolic_bp</td>
                    <td>number</td>
                    <td></td>
                  </tr>
                  <tr>
                    <td>systolic_bp</td>
                    <td>number</td>
                    <td></td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>

          <div class="notes-section">
            <div class="notes-note" id="note-bp-controlled">
              <h5>Example queries (detailed)</h5>
              <p>
                Note: Example queries in this document does not take
                facility/region/state into account. Refer to additional
                dimensions below on how to modify these queries for facilities,
                region, state.
              </p>
            </div>
          </div>

          <div class="notes-section">
            <div class="notes-note" id="note-bp-uncontrolled">
              <h6>Cumulative dead patients</h6>
              <p>
                <b>Definition:</b> Cumulative number of dead patients at the end
                of each month (including patients that have died in previous
                months).
              </p>
              <p>
                This should be implemented as a flag during the data collection
                process where users are allowed to indicate when a patient is
                deceased. This flag allows dead patients to be excluded from
                indicators. All historic data of dead patients is excluded from
                figures.
              </p>
              <p>
                <b>Tip:</b> This indicator is cumulative and should increase
                over time.
              </p>
            </div>
            <div class="notes-details">
              <blockquote>
                <h6>Scenario example</h6>
                <p>
                  A patient was registered Sep-2023, and marked dead on
                  Jan-2024. This patient is included in figures Sep-Jan. From
                  the moment they are marked dead all data will be excluded.
                  This patient will no longer be included in any figures for
                  Sep-Jan.
                </p>
              </blockquote>
              <blockquote class="codeblock">
                <h6>Code example</h6>
                <pre>
                    <code>WITH DEAD_PATIENTS_BY_MONTH as (
    SELECT 
        DATE_TRUNC('month',<b>DEATH_DATE</b>) as REF_MONTH,
        count(*) as NB_DEAD_PATIENTS_THAT_MONTH
    FROM patients
    WHERE <b>PATIENT_STATUS</b> = 'dead'
    GROUP by DATE_TRUNC('month',<b>DEATH_DATE</b>))
SELECT 
    REFERENCE.REF_MONTH,
    SUM(REFERENCE_BEFORE.NB_DEAD_PATIENTS_THAT_MONTH) as <b>CUMULATIVE_NUMBER_OF_DEAD_PATIENTS</b>
FROM DEAD_PATIENTS_BY_MONTH REFERENCE
JOIN DEAD_PATIENTS_BY_MONTH REFERENCE_BEFORE on REFERENCE.REF_MONTH >= REFERENCE_BEFORE.REF_MONTH
GROUP BY REFERENCE.REF_MONTH
ORDER by REFERENCE.REF_MONTH desc</code>
                </pre>
              </blockquote>
              <blockquote>
                <h6>Data example</h6>
                <table border="1">
                  <thead>
                    <tr>
                      <th>ref_month</th>
                      <th>cumulative_number_of_patients</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>2024-06-01</td>
                      <td>95</td>
                    </tr>
                    <tr>
                      <td>2024-05-01</td>
                      <td>87</td>
                    </tr>
                    <tr>
                      <td>2024-04-01</td>
                      <td>80</td>
                    </tr>
                    <tr>
                      <td>2024-03-01</td>
                      <td>76</td>
                    </tr>
                    <tr>
                      <td>2024-02-01</td>
                      <td>64</td>
                    </tr>
                    <tr>
                      <td>2024-01-01</td>
                      <td>60</td>
                    </tr>
                    <tr>
                      <td>2023-12-01</td>
                      <td>49</td>
                    </tr>
                    <tr>
                      <td>2023-11-01</td>
                      <td>45</td>
                    </tr>
                    <tr>
                      <td>2023-10-01</td>
                      <td>42</td>
                    </tr>
                    <tr>
                      <td>2023-09-01</td>
                      <td>40</td>
                    </tr>
                    <tr>
                      <td>2023-08-01</td>
                      <td>35</td>
                    </tr>
                    <tr>
                      <td>2023-07-01</td>
                      <td>30</td>
                    </tr>
                    <tr>
                      <td>2023-06-01</td>
                      <td>28</td>
                    </tr>
                  </tbody>
                </table>
              </blockquote>
            </div>
          </div>

          <div class="notes-section">
            <div class="notes-note" id="note-bp-3-month-ltfu">
              <h6>Cumulative registered patients and monthly registrations</h6>
              <p>
                <b>Monthly registrations</b> at the end of each month are the
                patients registered during the month.
              </p>
              <p>
                <b>Cumulative</b> registered patients at the end of each month
                are the total number of patients registered before the end of
                the month and are not dead.
              </p>
              <p>
                <b>Tip:</b> This number should be growing with time. More recent
                months should have a greater number than older months.
              </p>
              <h6>Subqueries detail</h6>
              <p class="code-highlight highlight-text code-highlight-blue">
                KNOWN_MONTHS
              </p>
              <p>
                This is a list of months known by the system. It can be obtained
                in a variety of ways, but can be derived from the months
                explicitly existing in the Database as in the example.
              </p>
              <p class="code-highlight highlight-text code-highlight-green">
                ALIVE_PATIENTS
              </p>
              <p>
                This is a list of all patients that are alive. We are limiting
                our subquery to the columns that is relevant for this
                aggregation. Registration date is rounded by month as we’re
                doing a monthly analysis.
              </p>
            </div>
            <div class="notes-details">
              <blockquote>
                <h6>Example</h6>
                <p>
                  A patient was registered Sep-2023, this patient is counted as
                  a monthly registration for Sep-2023. For cumulative
                  registrations, the patient is counted for Sep-2023 and for
                  every subsequent month as long as they are not marked as dead.
                </p>
              </blockquote>
              <blockquote>
                <h6>Code example</h6>

                <pre><code>WITH 
<span class="code-highlight code-highlight-blue">KNOWN_MONTHS as (
    select 
        distinct(DATE_TRUNC('month',<b>REGISTRATION_DATE</b>)) as REF_MONTH
    from patients
),</span><span class="code-highlight code-highlight-green">PATIENTS_BY_MONTH as (
    select 
        DATE_TRUNC('month',created_at) as REF_MONTH,
        count(*) as NB_NEW_PATIENTS
    from patients
    where status <> 'dead'
    group by DATE_TRUNC('month',created_at)
)</span>SELECT
    KNOWN_MONTHS.REF_MONTH,
    sum(REFERENCE_BEFORE.NB_NEW_PATIENTS) as CUMULATIVE_NUMBER_OF_PATIENTS,
   sum(case when KNOWN_MONTHS.REF_MONTH = REFERENCE_BEFORE.REF_MONTH then NB_NEW_PATIENTS else null end) as NB_NEW_PATIENTS
FROM KNOWN_MONTHS 
join PATIENTS_BY_MONTH REFERENCE_BEFORE on KNOWN_MONTHS.REF_MONTH >= REFERENCE_BEFORE.REF_MONTH
GROUP BY KNOWN_MONTHS.REF_MONTH
order by KNOWN_MONTHS.REF_MONTH desc

                </code></pre>
              </blockquote>
              <blockquote>
                <h6>Data example</h6>
                <table border="1">
                  <thead>
                    <tr>
                      <th>ref_month</th>
                      <th>cumulative_number_of_patients</th>
                      <th>nb_new_patients</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>2024-06-01</td>
                      <td>41151</td>
                      <td>2777</td>
                    </tr>
                    <tr>
                      <td>2024-05-01</td>
                      <td>38374</td>
                      <td>5288</td>
                    </tr>
                    <tr>
                      <td>2024-04-01</td>
                      <td>33086</td>
                      <td>5921</td>
                    </tr>
                    <tr>
                      <td>2024-03-01</td>
                      <td>27165</td>
                      <td>5338</td>
                    </tr>
                    <tr>
                      <td>2024-02-01</td>
                      <td>21827</td>
                      <td>2630</td>
                    </tr>
                    <tr>
                      <td>2024-01-01</td>
                      <td>19197</td>
                      <td>1755</td>
                    </tr>
                    <tr>
                      <td>2023-12-01</td>
                      <td>17442</td>
                      <td>1132</td>
                    </tr>
                    <tr>
                      <td>2023-11-01</td>
                      <td>16310</td>
                      <td>1348</td>
                    </tr>
                    <tr>
                      <td>2023-10-01</td>
                      <td>14962</td>
                      <td>1844</td>
                    </tr>
                    <tr>
                      <td>2023-09-01</td>
                      <td>13118</td>
                      <td>1048</td>
                    </tr>
                    <tr>
                      <td>2023-08-01</td>
                      <td>12070</td>
                      <td>979</td>
                    </tr>
                    <tr>
                      <td>2023-07-01</td>
                      <td>11091</td>
                      <td>1176</td>
                    </tr>
                    <tr>
                      <td>2023-06-01</td>
                      <td>9915</td>
                      <td>1542</td>
                    </tr>
                    <tr>
                      <td>2023-05-01</td>
                      <td>8373</td>
                      <td>1545</td>
                    </tr>
                  </tbody>
                </table>
              </blockquote>
            </div>
          </div>

          <div class="notes-section">
            <div class="notes-note" id="note-bp-registrations">
              <h6>Patients under care & 12 month lost to follow-up</h6>
              <p>
                A patient that is not <b>Dead</b> is either <b>Under Care</b> or
                <b>12 months lost to follow-up</b> for a given reference month:
              </p>
              <ul>
                <li>
                  A patient with at least one visit recorded in the past 12
                  months before the end of the reference month is Under Care
                </li>
                <li>
                  A patient with no visit recorded in the past 12 months before
                  the end of the reference month is 12 month lost to follow-up
                </li>
              </ul>
              <p>
                As these two indicators are mutually exclusive (the total of
                <b><i>patients under care</i></b> and patients
                <b><i>12 month lost to follow-up</i></b> should equal
                <b><i>cumulative registrations</i></b
                >), it can be calculated in a single query.
              </p>
              <p
                style="
                  background: rgb(255, 244, 172);
                  border-width: 4px;
                  border-color: rgb(236, 223, 77);
                  padding: 8px 12px;
                "
              >
                Before the end of the reference month - This means the last day
                of the month is always referenced even when that date is in the
                future and has not yet occurred. For example if today is
                10-Jun-2024, the end of the reference month is 30-Jun-2024, so
                checking for an event in the last 12 months includes events that
                occurred between 1-Jul-2023 and 30-Jun-2024.
              </p>
              <h6>Subqueries detail</h6>
              <p
                style="
                  background-color: rgb(62, 124, 204);
                  display: inline-block;
                  color: white;
                  padding: 2px 4px;
                  margin-top: 8px;
                "
              >
                KNOWN_MONTHS
              </p>
              <p>
                This is a list of months known by the system. It can be obtained
                in a variety of ways, but can be derived from the months
                explicitly existing in the Database as in the example.
              </p>
              <p
                style="
                  background-color: rgb(14, 120, 85);
                  display: inline-block;
                  color: white;
                  padding: 2px 4px;
                  margin-top: 8px;
                "
              >
                ALIVE_PATIENTS
              </p>
              <p>
                This is a list of all patients that are alive. We are limiting
                our subquery to the columns that is relevant for this
                aggregation. Registration date is rounded by month as we’re
                doing a monthly analysis.
              </p>
              <p
                style="
                  background-color: rgb(156, 109, 38);
                  display: inline-block;
                  color: white;
                  padding: 2px 4px;
                  margin-top: 8px;
                "
              >
                BP_ENCOUNTERS
              </p>
              <p>
                This is a list of all BP readings taken for each patient based
                on the visit month.
              </p>
            </div>
            <div class="notes-details">
              <blockquote>
                <h6>Examples</h6>
                <p>
                  A patient was registered in Jan-2023, and visited once in
                  Mar-2023. Today is Feb-<b style="color: #d9d9d9">2024</b>.
                  This patient is counted as a <i>patient under care</i> as they
                  had a visit in the past 12 months.
                </p>
                <p>
                  Using the same patient, today is Mar-<b style="color: #d9d9d9"
                    >2024</b
                  >. This patient is counted as
                  <i>12 months lost to follow-up</i> because they have no visit
                  in the past 12 months.
                </p>
              </blockquote>
              <blockquote>
                <h6>Code example</h6>
                <pre>
                <code>WITH 
<span style="background-color: rgb(62, 124, 204); display: block;">KNOWN_MONTHS as (
    SELECT 
        distinct(DATE_TRUNC('month',<b>REGISTRATION_DATE</b>)) as REF_MONTH
    FROM patients),</span><span style="background-color: rgb(14, 120, 85); display: block;">ALIVE_PATIENTS as (
    SELECT 
        DATE_TRUNC('month',<b>REGISTRATION_DATE</b>) as REGISTRATION_MONTH,
        patient_id
    FROM patients
    WHERE <b>PATIENT_STATUS</b> <> 'dead'
),</span><span style="background-color: rgb(156, 109, 38); display: block;">BP_ENCOUNTERS as (
    SELECT
        patient_id,
        DATE_TRUNC('month',<b>ENCOUNTER_DATE</b>)  as BP_ENCOUNTER_MONTH
    FROM blood_pressures
)</span>SELECT 
    KNOWN_MONTHS.REF_MONTH,
    sum(CASE WHEN BP_ENCOUNTERS.patient_id IS NULL THEN 1 ELSE NULL END ) as <b>NB_PATIENTS_LOST_TO_FOLLOW_UP</b>,
    count(distinct(BP_ENCOUNTERS.patient_id)) as <b>NB_PATIENTS_UNDER_CARE</b>,
    count(distinct(ALIVE_PATIENTS.patient_id)) as <b>CUMULATIVE_NUMBER_OF_PATIENTS</b>
FROM KNOWN_MONTHS
JOIN ALIVE_PATIENTS 
    on ALIVE_PATIENTS.REGISTRATION_MONTH <= KNOWN_MONTHS.REF_MONTH
LEFT OUTER JOIN BP_ENCOUNTERS 
    on BP_ENCOUNTERS.patient_id = ALIVE_PATIENTS.patient_id
    and BP_ENCOUNTER_MONTH <= KNOWN_MONTHS.REF_MONTH
    and BP_ENCOUNTER_MONTH + interval '12 month'> KNOWN_MONTHS.REF_MONTH
GROUP BY KNOWN_MONTHS.REF_MONTH
ORDER by KNOWN_MONTHS.REF_MONTH desc;
                </code>
              </pre>
              </blockquote>
              <blockquote style="overflow-x: scroll">
                <h6>Data example</h6>
                <table border="1">
                  <thead>
                    <tr>
                      <th>ref_month</th>
                      <th>nb_patients_lost_to_follow_up</th>
                      <th>nb_patients_under_care</th>
                      <th>total_number_of_patients</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>2024-06-01</td>
                      <td>2266</td>
                      <td>38885</td>
                      <td>41151</td>
                    </tr>
                    <tr>
                      <td>2024-05-01</td>
                      <td>1990</td>
                      <td>36384</td>
                      <td>38374</td>
                    </tr>
                    <tr>
                      <td>2024-04-01</td>
                      <td>1778</td>
                      <td>31308</td>
                      <td>33086</td>
                    </tr>
                    <tr>
                      <td>2024-03-01</td>
                      <td>1492</td>
                      <td>25673</td>
                      <td>27165</td>
                    </tr>
                    <tr>
                      <td>2024-02-01</td>
                      <td>1283</td>
                      <td>20544</td>
                      <td>21827</td>
                    </tr>
                    <tr>
                      <td>2024-01-01</td>
                      <td>1155</td>
                      <td>18042</td>
                      <td>19197</td>
                    </tr>
                    <tr>
                      <td>2023-12-01</td>
                      <td>997</td>
                      <td>16445</td>
                      <td>17442</td>
                    </tr>
                    <tr>
                      <td>2023-11-01</td>
                      <td>918</td>
                      <td>15392</td>
                      <td>16310</td>
                    </tr>
                    <tr>
                      <td>2023-10-01</td>
                      <td>827</td>
                      <td>14135</td>
                      <td>14962</td>
                    </tr>
                    <tr>
                      <td>2023-09-01</td>
                      <td>721</td>
                      <td>12397</td>
                      <td>13118</td>
                    </tr>
                    <tr>
                      <td>2023-08-01</td>
                      <td>619</td>
                      <td>11451</td>
                      <td>12070</td>
                    </tr>
                    <tr>
                      <td>2023-07-01</td>
                      <td>538</td>
                      <td>10553</td>
                      <td>11091</td>
                    </tr>
                    <tr>
                      <td>2023-06-01</td>
                      <td>443</td>
                      <td>9472</td>
                      <td>9915</td>
                    </tr>
                    <tr>
                      <td>2023-05-01</td>
                      <td>362</td>
                      <td>8011</td>
                      <td>8373</td>
                    </tr>
                  </tbody>
                </table>
              </blockquote>
            </div>
          </div>

          <div class="notes-section">
            <div class="notes-note" id="note-bp-under-care">
              <h5>
                Newly registered & Patients under care registered before the
                past 3 months
              </h5>
              <p>
                There are two mutually exclusive categories for
                <b>Patients Under Care</b>:
              </p>
              <ul>
                <li>
                  <b>Newly registered</b>: Patient registered in the last 3
                  months. <b>Note</b>: This category is not visualized in the
                  dashboard.
                </li>
                <li>
                  <b>Patients under care registered before the past 3 months</b
                  >: Patients registered before the past 3 months.
                </li>
              </ul>

              <p>
                There are 3 mutually exclusive categories for
                <b>Patients under care registered before the past 3 months</b>:
              </p>
              <ul>
                <li>
                  <b>Controlled BP</b>: Patient registered before the past 3
                  months, with a BP reading <140/90 (systolic BP < 140 AND
                  diastolic BP < 90) recorded at the patient's most recent visit
                  within the past 3 months.
                </li>
                <li>
                  <b>Uncontrolled BP</b>: Patient registered before the past 3
                  months, with a BP reading >=140/90 (systolic BP >= 140 OR
                  diastolic BP >= 90) recorded at the patient's most recent
                  visit within the past 3.
                </li>
                <li>
                  <b>No visit</b>: Patient registered before the past 3 months,
                  with no recorded visited in the last 3 months.
                </li>
              </ul>

              <h6>Subqueries detail</h6>
              <p
                style="
                  background-color: rgb(62, 124, 204);
                  display: inline-block;
                  color: white;
                  padding: 2px 4px;
                  margin-top: 8px;
                "
              >
                KNOWN_MONTHS
              </p>
              <p>
                This is a list of months known by the system. It can be obtained
                in a variety of ways, but can be derived from the months
                explicitly existing in the Database as in the example.
              </p>
              <p
                style="
                  background-color: rgb(14, 120, 85);
                  display: inline-block;
                  color: white;
                  padding: 2px 4px;
                  margin-top: 8px;
                "
              >
                ALIVE_PATIENTS
              </p>
              <p>
                This is a list of all patients that are alive. We are limiting
                our subquery to the columns that is relevant for this
                aggregation. Registration date is rounded by month as we’re
                doing a monthly analysis.
              </p>
              <p
                style="
                  background-color: rgb(156, 109, 38);
                  display: inline-block;
                  color: white;
                  padding: 2px 4px;
                  margin-top: 8px;
                "
              >
                BP_ENCOUNTERS
              </p>
              <p>
                This is a list of all BP readings taken for each patient based
                on the visit month.
              </p>
              <p
                style="
                  background-color: rgb(156, 38, 38);
                  display: inline-block;
                  color: white;
                  padding: 2px 4px;
                  margin-top: 8px;
                "
              >
                LATEST_BP_BY_MONTH_AND_PATIENT
              </p>
              <p>
                This subquery returns the most recent BP reading for every
                patient for every Reference Month.
              </p>
              <p>
                This is done by first taking the date of the latest BP
                Measurement in the past 12 months
                <b>from a given Reference Month for a given patient.</b>
              </p>
              <pre><code style="font-size: 12px; background-color: #dbdbdb !important; color: rgb(80, 80, 80) !important; padding: 12px 16px; margin-bottom: 12px;">SELECT
    KNOWN_MONTHS.REF_MONTH,
    MOST_RECENT_BP_ENCOUNTER.patient_id, 
    MAX(MOST_RECENT_BP_ENCOUNTER.created_at) as MOST_RECENT_BP_DATE
from blood_pressures MOST_RECENT_BP_ENCOUNTER
join KNOWN_MONTHS
    on DATE_TRUNC('month', MOST_RECENT_BP_ENCOUNTER.created_at) <= KNOWN_MONTHS.REF_MONTH
    and DATE_TRUNC('month',MOST_RECENT_BP_ENCOUNTER.created_at) + interval '12 month'> KNOWN_MONTHS.REF_MONTH
group by KNOWN_MONTHS.REF_MONTH, patient_id</code></pre>
              <p>
                Using this result, we join it against BP_ENCOUNTERS to get the
                information we need.
              </p>
            </div>
            <div class="notes-details">
              <blockquote>
                <h6>Examples</h6>
                <b style="color: white">Controlled BP</b>
                <p>
                  A patient was registered into the hypertension program in
                  Sep-2023. They visited for blood pressure measures in Nov-2023
                  (BP controlled), Jan-2024 (BP not controlled), Feb-2024 (BP
                  not controlled) and Mar-2024 (BP controlled).
                </p>
                <p>
                  Today is Apr-2024, this patient has visited twice in the past
                  3 months (Feb-2024 and Mar-2024) and is categorized in the
                  controlled BP group at their latest visit (Mar-2024).
                </p>

                <b style="color: white">Uncontrolled BP</b>
                <p>
                  A patient was registered into the hypertension program in
                  Sep-2023. They visited for blood pressure measures in Nov-2023
                  (BP controlled), Feb-2024 (BP not controlled) and Apr-2024 (BP
                  not controlled). Today is Apr-2024, this patient has visited
                  twice in the past 3 months (Feb-2024 and Apr-2024) and is
                  uncontrolled BP at their latest visit (Apr-2024).
                </p>

                <b style="color: white">No visit</b>
                <p>
                  A patient was registered into the hypertension program in
                  Sep-2023. They visited for blood pressure measures in Dec-2023
                  (BP controlled), Jan-2024 (BP not controlled). Today is
                  Apr-2024, this patient had no visit in the past 3 months.
                </p>
              </blockquote>

              <blockquote>
                <h6>Code example</h6>
                <pre><code>WITH 
<span style="background-color: rgb(62, 124, 204); display: block;">KNOWN_MONTHS as (
    select 
        distinct(DATE_TRUNC('month',created_at)) as REF_MONTH
    from patients
),</span><span style="background-color: rgb(14, 120, 85); display: block;">ALIVE_PATIENTS as (
  select 
      DATE_TRUNC('month',created_at) as REGISTRATION_MONTH,
      id as patient_id
  from patients
  where <b>PATIENT_STATUS</b> <> 'dead'
),
</span><span style="background-color: rgb(156, 109, 38); display: block;">BP_ENCOUNTERS as (
    SELECT
        id,
        patient_id,
        systolic, 
        diastolic,
        created_at  as BP_ENCOUNTER_DATE,
        DATE_TRUNC('month',created_at)  as BP_ENCOUNTER_MONTH
    from blood_pressures
),</span><span style="background-color: rgb(156, 38, 38); display: block;">LATEST_BP_BY_MONTH_AND_PATIENT  as (
    WITH MOST_RECENT_BP_ENCOUNTER as (
        SELECT
            KNOWN_MONTHS.REF_MONTH,
            MOST_RECENT_BP_ENCOUNTER.patient_id, 
            MAX(MOST_RECENT_BP_ENCOUNTER.created_at) as MOST_RECENT_BP_DATE
        from blood_pressures MOST_RECENT_BP_ENCOUNTER
        join KNOWN_MONTHS
            on DATE_TRUNC('month', MOST_RECENT_BP_ENCOUNTER.created_at) <= KNOWN_MONTHS.REF_MONTH
            and DATE_TRUNC('month',MOST_RECENT_BP_ENCOUNTER.created_at) + interval '12 month'> KNOWN_MONTHS.REF_MONTH
        group by KNOWN_MONTHS.REF_MONTH, patient_id)
    select
        REF_MONTH, MOST_RECENT_BP_ENCOUNTER.patient_id,
        max(systolic) as systolic, 
        max(diastolic) as diastolic,
        max(BP_ENCOUNTER_MONTH) as BP_ENCOUNTER_MONTH
    from MOST_RECENT_BP_ENCOUNTER 
    join BP_ENCOUNTERS 
        on MOST_RECENT_BP_ENCOUNTER.MOST_RECENT_BP_DATE = BP_ENCOUNTERS.BP_ENCOUNTER_DATE
        and MOST_RECENT_BP_ENCOUNTER.patient_id = BP_ENCOUNTERS.patient_id
    group by REF_MONTH, MOST_RECENT_BP_ENCOUNTER.patient_id
)</span>SELECT
    KNOWN_MONTHS.<b>REF_MONTH</b>,
    count(*) as <b>NB_PATIENTS_UNDER_CARE</b>,
    sum(CASE WHEN ALIVE_PATIENTS.REGISTRATION_MONTH + interval '3 month' > KNOWN_MONTHS.REF_MONTH then 1 else 0 end ) as <b>NB_PATIENTS_NEWLY_REGISTERED</b>,
    sum(CASE WHEN ALIVE_PATIENTS.REGISTRATION_MONTH + interval '3 month' > KNOWN_MONTHS.REF_MONTH then 0 else 1 end ) as <b>NB_PATIENTS_UNDER_CARE_REGISTERED_BEFORE_THE_PAST_3_MONTHS</b>,
    sum(CASE
        WHEN ALIVE_PATIENTS.REGISTRATION_MONTH + interval '3 month' > KNOWN_MONTHS.REF_MONTH then 0
        WHEN LATEST_BP_BY_MONTH_AND_PATIENT.BP_ENCOUNTER_MONTH + interval '3 month' <= KNOWN_MONTHS.REF_MONTH then 1
        else 0 end ) as <b>NB_PATIENTS_NO_VISIT</b>,
    sum(CASE
        WHEN ALIVE_PATIENTS.REGISTRATION_MONTH + interval '3 month' > KNOWN_MONTHS.REF_MONTH then 0
        WHEN LATEST_BP_BY_MONTH_AND_PATIENT.BP_ENCOUNTER_MONTH + interval '3 month' <= KNOWN_MONTHS.REF_MONTH then 0
        WHEN systolic > 140 OR diastolic > 90 then 1 
        else 0 end ) as <b>NB_PATIENTS_UNCONTROLLED</b>,
    sum(CASE
        WHEN ALIVE_PATIENTS.REGISTRATION_MONTH + interval '3 month' > KNOWN_MONTHS.REF_MONTH then 0
        WHEN LATEST_BP_BY_MONTH_AND_PATIENT.BP_ENCOUNTER_MONTH + interval '3 month' <= KNOWN_MONTHS.REF_MONTH then 0
        WHEN systolic > 140 OR diastolic > 90 then 0 
        else 1 end ) as <b>NB_PATIENTS_CONTROLLED</b>
FROM KNOWN_MONTHS
join ALIVE_PATIENTS 
    on ALIVE_PATIENTS.REGISTRATION_MONTH <= KNOWN_MONTHS.REF_MONTH
join LATEST_BP_BY_MONTH_AND_PATIENT
    on LATEST_BP_BY_MONTH_AND_PATIENT.patient_id = ALIVE_PATIENTS.patient_id
    and LATEST_BP_BY_MONTH_AND_PATIENT.REF_MONTH = KNOWN_MONTHS.REF_MONTH
GROUP BY KNOWN_MONTHS.REF_MONTH
order by 1 desc
                </code>
              </pre>
              </blockquote>

              <blockquote>
                <h6>Data example</h6>
                <div>
                  <table
                    border="1"
                    style="overflow-x: scroll; display: block; max-width: 500px"
                  >
                    <thead>
                      <tr>
                        <th>ref_month</th>
                        <th>nb_patients_under_care</th>
                        <th>nb_patients_newly_registered</th>
                        <th>
                          nb_patients_under_care_registered_before_the_last_3_months
                        </th>
                        <th>nb_patients_no_visit</th>
                        <th>nb_patients_uncontrolled</th>
                        <th>nb_patients_controlled</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td>2024-06-01</td>
                        <td>38885</td>
                        <td>13617</td>
                        <td>25268</td>
                        <td>5262</td>
                        <td>5121</td>
                        <td>14885</td>
                      </tr>
                      <tr>
                        <td>2024-05-01</td>
                        <td>36384</td>
                        <td>16058</td>
                        <td>20326</td>
                        <td>3926</td>
                        <td>3955</td>
                        <td>12445</td>
                      </tr>
                      <tr>
                        <td>2024-04-01</td>
                        <td>31308</td>
                        <td>13419</td>
                        <td>17889</td>
                        <td>3590</td>
                        <td>3205</td>
                        <td>11094</td>
                      </tr>
                      <tr>
                        <td>2024-03-01</td>
                        <td>25673</td>
                        <td>9461</td>
                        <td>16212</td>
                        <td>3305</td>
                        <td>2852</td>
                        <td>10055</td>
                      </tr>
                      <tr>
                        <td>2024-02-01</td>
                        <td>20544</td>
                        <td>5389</td>
                        <td>15155</td>
                        <td>2841</td>
                        <td>2902</td>
                        <td>9412</td>
                      </tr>
                      <tr>
                        <td>2024-01-01</td>
                        <td>18042</td>
                        <td>4138</td>
                        <td>13904</td>
                        <td>2369</td>
                        <td>2653</td>
                        <td>8882</td>
                      </tr>
                      <tr>
                        <td>2023-12-01</td>
                        <td>16445</td>
                        <td>4229</td>
                        <td>12216</td>
                        <td>1799</td>
                        <td>2139</td>
                        <td>8278</td>
                      </tr>
                      <tr>
                        <td>2023-11-01</td>
                        <td>15392</td>
                        <td>4136</td>
                        <td>11256</td>
                        <td>1676</td>
                        <td>2026</td>
                        <td>7554</td>
                      </tr>
                      <tr>
                        <td>2023-10-01</td>
                        <td>14135</td>
                        <td>3767</td>
                        <td>10368</td>
                        <td>1492</td>
                        <td>1888</td>
                        <td>6988</td>
                      </tr>
                      <tr>
                        <td>2023-09-01</td>
                        <td>12397</td>
                        <td>3111</td>
                        <td>9286</td>
                        <td>1268</td>
                        <td>1821</td>
                        <td>6197</td>
                      </tr>
                      <tr>
                        <td>2023-08-01</td>
                        <td>11451</td>
                        <td>3604</td>
                        <td>7847</td>
                        <td>1061</td>
                        <td>1476</td>
                        <td>5310</td>
                      </tr>
                      <tr>
                        <td>2023-07-01</td>
                        <td>10553</td>
                        <td>4160</td>
                        <td>6393</td>
                        <td>910</td>
                        <td>1314</td>
                        <td>4169</td>
                      </tr>
                      <tr>
                        <td>2023-06-01</td>
                        <td>9472</td>
                        <td>3495</td>
                        <td>5977</td>
                        <td>942</td>
                        <td>1320</td>
                        <td>3715</td>
                      </tr>
                      <tr>
                        <td>2023-05-01</td>
                        <td>8011</td>
                        <td>2195</td>
                        <td>5816</td>
                        <td>969</td>
                        <td>1279</td>
                        <td>3568</td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </blockquote>
            </div>
          </div>

          <div class="notes-section">
            <div class="notes-note" id="note-bp-registrations">
              <h5>Hypertension treatment cascade</h5>
              <p>
                The treatment cascade gives a view of how many estimated
                patients with hypertension in the region have been registered
                into the hypertension program, how many are under treatment for
                hypertension and, of those under treatment, how many have
                controlled blood pressure. The cascade should be constructed for
                the latest completed reference month.
              </p>
              <p>
                The estimated patients with hypertension in the region can be
                found from STEPs survey data and entered into the system. The
                estimated number of people with hypertension cannot be inferred
                from the database.
              </p>
              <p>
                * The values related to these figures are colored in the
                previous data example tables:
              </p>
              <ul>
                <li>Cumulative registrations</li>
                <li>Patients under care</li>
                <li>Patients with BP controlled</li>
              </ul>
              <p
                style="
                  background: rgb(255, 244, 172);
                  border-width: 4px;
                  border-color: rgb(236, 223, 77);
                  padding: 8px 12px;
                "
              >
                The corresponding values for the month of <b>May 2024</b> are
                highlighted in their respective colors in the data example
                tables.
              </p>
            </div>
          </div>

          <div class="notes-section">
            <div class="notes-note" id="note-bp-monthly">
              <h5>Additional Dimensions</h5>
              <p>
                In order to aggregate by region/state, queries can be modified
                easily to take this in account by adding the correct level of
                aggregation in:
              </p>
              <ul>
                <li>Patient subqueries</li>
                <li>Group by clause of the main query</li>
              </ul>
            </div>
          </div>

          <div class="notes-section">
            <div class="notes-note" id="note-bp-12-month-ltfu">
              <h5>Caching results</h5>
              <p>
                Depending on the size of the different tables, these queries may
                be too resource intensive to run in real time, each time a user
                views the HEARTS360 dashboard.
              </p>
              <p>
                It is a good practice to cache the results and refresh the
                tables daily. For example, using Materialized Views that refresh
                once a day. Caching can also be done at application level, or
                through a variety of other mechanisms.
              </p>
            </div>
          </div>

          <div class="notes-section">
            <div class="notes-note" id="note-bp-percent-registered">
              <h5>Data Checks</h5>
              <p>
                After these queries have been adapted to a system, it is a good
                practice to check that values obtained through the different
                queries are consistent:
              </p>
              <p>
                The same numbers obtained from different queries should be
                identical
              </p>
              <ul>
                <li>
                  <b>CUMULATIVE_NUMBER_OF_PATIENTS</b> should be the same value
                  from the two queries that produce it
                </li>
                <li>
                  <b>NB_PATIENTS_UNDER_CARE</b> should be the same value from
                  the two queries that produce it
                </li>
              </ul>

              <p>The following queries should total:</p>
              <ul>
                <li>
                  NB_PATIENTS_UNDER_CARE = NB_PATIENTS_NEWLY_REGISTERED +
                  NB_PATIENTS_CONTROLLED + NB_PATIENTS_UNCONTROLLED +
                  NB_PATIENTS_NO_VISIT
                </li>
                <li>
                  NB_PATIENTS_UNDER_CARE_REGISTERED_BEFORE_PAST_3_MONTHS =
                  NB_PATIENTS_UNDER_CARE - NB_PATIENTS_NEWLY_REGISTERED
                </li>
                <li>
                  CUMULATIVE_NUMBER_OF_PATIENTS = NB_PATIENTS_LOST_TO_FOLLOW_UP
                  + NB_PATIENTS_UNDER_CARE
                </li>
              </ul>
              <p>Cumulative indicators should increase over time:</p>
              <ul>
                <li>Cumulative number of dead patients</li>
                <li>Cumulative number of registered patients</li>
              </ul>
              <p>Month to month verification</p>
              <ul>
                <li>
                  NB_PATIENTS_NEWLY_REGISTERED of month X =
                  (CUMULATIVE_NUMBER_OF_PATIENTS of month X) -
                  (CUMULATIVE_NUMBER_OF_PATIENTS of month X -3)
                </li>
              </ul>
            </div>
          </div>

          <div class="notes-section">
            <div class="notes-note" note-bp-percent-under-care>
              <h5>Adapting queries to your data</h5>
              <p>
                If your PATIENTS and EVENTS tables are structured similar to the
                database example, it should be possible to adapt the queries by
                changing only the subqueries.
              </p>
              <p>
                This is the easiest way to produce valid queries that will work
                for your data.
              </p>
            </div>
          </div>
        </div>
      </div>
    </main>
  </body>
  <style>
    .menu {
      display: grid;
      grid-template-columns: 3fr 1fr;
      gap: 36px;
      margin-top: 0px;
      margin-bottom: 48px;
    }

    .span-2-col {
      grid-column: span 2;
    }

    a {
      position: relative;
    }

    a::before {
      position: absolute;
      top: -30px;
    }

    /* h1,
    h2,
    h3 {
      font-weight: 700;
    }
    h3 {
      font-size: 1.2rem;
      margin: 8px 0;
    }

    article {
      margin: 16px 0;
    } */
    .markdown-body {
      /* background: none; */
      padding: 24px;
      & h1,
      h2,
      h3,
      h4,
      h5,
      h6 {
        font-weight: 700;
      }
      & h1 {
        font-size: 3rem;
      }
      & h2 {
        text-transform: none;
        margin-top: 3rem;
        font-size: 1.75rem;
      }

      & h3.block {
        display: flex;
        gap: 8px;
        align-items: center;
      }

      .note {
        color: #616161;
        font-style: italic;
      }
      .note::before {
        content: "Note";
        background: #e2e2e2;
        color: #4e4e4e;
        padding: 3px 6px;
        font-size: 0.9rem;
        margin-right: 8px;
        border-radius: 3px;
      }
    }

    .definition {
      background: rgba(255, 51, 85, 0.1);
      border: 1px solid rgba(255, 51, 85, 0.2);
      padding: 1px 6px;
      color: #770b0b;
      border-radius: 4px;
      font-family: monospace;
      font-weight: 500;
      font-size: 1rem;
    }

    .nav-jump-links {
      & li {
        margin: 8px 0 8px 8px;

        &.parent {
          font-weight: 700;
          /* font-size: 1.1rem; */
          margin-left: 0;
        }

        &:not(.parent) p::before {
          content: "⎣";
          margin-right: 4px;
          color: #a9a9a9;
          font-size: 0.5rem;
          vertical-align: text-top;
        }
      }
    }
  </style>
  <script>
    function kebabToSentenceCase(kebabCaseString) {
      // Split the string by hyphens to get individual words
      const words = kebabCaseString.split("-");

      // Capitalize the first letter of the first word and make the rest lowercase
      const sentenceCaseWords = words.map((word, index) => {
        if (index === 0) {
          return word.charAt(0).toUpperCase() + word.slice(1).toLowerCase();
        } else {
          return word.toLowerCase();
        }
      });

      // Join the words back to form the sentence case string
      const sentenceCaseString = sentenceCaseWords.join(" ");

      return sentenceCaseString.replace(/bp/gi, "BP");
    }

    function findIds() {
      // Find all elements with an 'id' attribute
      const elementsWithIds = document.querySelectorAll("[id]");
      console.log(elementsWithIds);
      // Create a list of jump links from the anchor tags
      const jumpLinks = [];
      for (const element of elementsWithIds) {
        const tag = element.localName;
        const id = element.id;
        jumpLinks.push({ tag, id });
      }
      return jumpLinks;
    }

    const jumpLinks = findIds();

    if (jumpLinks.length > 0) {
      console.log("List of Jump Links:");
      console.log(jumpLinks);
    } else {
      console.log("No jump links found.");
    }

    function buildNavList(arrayOfLinks) {
      let html = "";
      arrayOfLinks.forEach((element) => {
        html += `
                <li ${element.tag === "h2" ? 'class="parent"' : ""}>
                  <p>
                    <a href="#${element.id}">
                      ${kebabToSentenceCase(element.id)}
                    </a>
                  </p>
                </li>
        `;
        // ${element.tag === "h3" ? '<span class="definition">' : ""}
        //                 ${element.tag === "h2" ? kebabToSentenceCase(element.id) : element.id}
        //               ${element.tag === "h3" ? '</span>' : ""}
      });
      console.log(html);
      return html;
    }
    document.getElementsByClassName("nav-jump-links")[0].innerHTML =
      buildNavList(jumpLinks);
  </script>
</html>
